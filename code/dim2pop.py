import matplotlib.pyplot as plt
def array(x):
    return x

dims = [10, 50, 100, 150, 200]

gowa_lgn = [

]

amaz_lgn = [{
    'precision': array([0.01115628, 0.00963319, 0.00851585]),
    'recall': array([0.0135039, 0.02850929, 0.04930234]),
    'ndcg': array([0.01419366, 0.02013497, 0.02778407])
}, {
    'precision': array([0.01701271, 0.01466254, 0.01245294]),
    'recall': array([0.02113765, 0.04432597, 0.07345692]),
    'ndcg': array([0.02180759, 0.03113499, 0.0418059])
}, {
    'precision': array([0.01953916, 0.01668066, 0.01406455]),
    'recall': array([0.02465987, 0.05098069, 0.08356442]),
    'ndcg': array([0.02525207, 0.0358769, 0.04781296])
}, {
    'precision': array([0.02086507, 0.01759398, 0.01468115]),
    'recall': array([0.02638765, 0.05429681, 0.08776453]),
    'ndcg': array([0.02683676, 0.03802356, 0.0502931])
}, {
    'precision': array([0.02129818, 0.01793363, 0.01501168]),
    'recall': array([0.02707271, 0.05546723, 0.08990857]),
    'ndcg': array([0.02740364, 0.03879779, 0.05143602])
}]

yelp_lgn = [

]


gowa_mf = [{
    'precision': array([0.04647666, 0.03055797, 0.02199143]),
    'recall': array([0.07414823, 0.12191316, 0.17504794]),
    'ndcg': array([0.07953955, 0.09324935, 0.10969389])
}, {
    'precision': array([0.05031817, 0.03487173, 0.02560319]),
    'recall': array([0.08193279, 0.14103901, 0.20569138]),
    'ndcg': array([0.07259724, 0.09185756, 0.11215137])
}, {
    'precision': array([0.05815862, 0.03986201, 0.02915132]),
    'recall': array([0.09886457, 0.1675994, 0.2408185]),
    'ndcg': array([0.09995954, 0.12212355, 0.14517874])
}, {
    'precision': array([0.06010784, 0.0413812, 0.03025923]),
    'recall': array([0.10255976, 0.17363906, 0.24919608]),
    'ndcg': array([0.10343133, 0.126663, 0.15055643])
}, {
    'precision': array([0.06160493, 0.04224529, 0.03078036]),
    'recall': array([0.10428687, 0.17561653, 0.25256792]),
    'ndcg': array([0.10480972, 0.12799754, 0.15224579])
}]

amaz_mf = [{
    'precision': array([0.00959862, 0.00860513, 0.00763406]),
    'recall': array([0.01101034, 0.02429993, 0.04255774]),
    'ndcg': array([0.01180628, 0.01704522, 0.0237134])
}, {
    'precision': array([0.00769333, 0.0096879, 0.00918679]),
    'recall': array([0.00934155, 0.02925869, 0.0540156]),
    'ndcg': array([0.00747246, 0.01622689, 0.02540095])
}, {
    'precision': array([0.01694812, 0.01450677, 0.01237505]),
    'recall': array([0.0214776, 0.0448984, 0.07434629]),
    'ndcg': array([0.02186425, 0.03128712, 0.04208539])
}, {
    'precision': array([0.01870904, 0.01587144, 0.01332333]),
    'recall': array([0.02381021, 0.04920175, 0.08024186]),
    'ndcg': array([0.0242411, 0.03448097, 0.04583813])
}, {
    'precision': array([0.01968163, 0.01646487, 0.01385255]),
    'recall': array([0.02525495, 0.05144778, 0.08364991]),
    'ndcg': array([0.0256557, 0.03615927, 0.04798495])
}]

yelp_mf = [{
    'precision': array([0.01930024, 0.01682961, 0.01474991]),
    'recall': array([0.0207483, 0.045256, 0.07925613]),
    'ndcg': array([0.02383979, 0.03321519, 0.04579942])
}, {
    'precision': array([0.02244537, 0.01874953, 0.01617974]),
    'recall': array([0.02512806, 0.05179265, 0.0879949]),
    'ndcg': array([0.02821071, 0.03833761, 0.05178098])
}, {
    'precision': array([0.02423266, 0.02031325, 0.01711317]),
    'recall': array([0.02766042, 0.05693138, 0.09472283]),
    'ndcg': array([0.03085805, 0.04206544, 0.05602131])
}, {
    'precision': array([0.02541367, 0.02126563, 0.01793293]),
    'recall': array([0.02903923, 0.05992252, 0.10000912]),
    'ndcg': array([0.03242265, 0.04433023, 0.059126])
}, {
    'precision': array([0.02674308, 0.02226096, 0.01857206]),
    'recall': array([0.03056291, 0.06285229, 0.10365871]),
    'ndcg': array([0.03415005, 0.04657764, 0.06161663])
}]


gowa_mf_bias = [{
    'APT': [0.8311856677160638, 0.15589903320159607, 0.01291529908232329],
    'I_KL':
    2.375745400841662,
    'I_bin':
    176.32677165354332
}, {
    'APT': [0.7400961774622021, 0.24481155245942163, 0.014982026034340873],
    'I_KL':
    1.8819884503508268,
    'I_bin':
    45.06867924528302
}, {
    'APT': [0.7458721280728748, 0.2337801705852172, 0.020252807734387288],
    'I_KL':
    1.4932388066666107,
    'I_bin':
    302.1045531197302
}, {
    'APT': [0.7358287561122552, 0.24119024493715033, 0.02288052336615493],
    'I_KL':
    1.5141943563065705,
    'I_bin':
    279.04672897196264
}, {
    'APT': [0.7291122423917602, 0.24607726572443375, 0.024712807287828226],
    'I_KL':
    1.533827086443457,
    'I_bin':
    281.0164705882353
}]

amaz_mf_bias = [{
    'APT': [0.7944859715441149, 0.19540204775561998, 0.010077313223030033],
    'I_KL':
    2.097238213855153,
    'I_bin':
    248.1112289383763
}, {
    'APT': [0.7795656592519877, 0.20634367342287424, 0.014087817943500365],
    'I_KL':
    2.2724564111065644,
    'I_bin':
    75.71536442414872
}, {
    'APT': [0.8352834184981036, 0.16029861520049052, 0.004369051915734428],
    'I_KL':
    1.6874541107393488,
    'I_bin':
    722.3739279588336
}, {
    'APT': [0.8285617271051446, 0.16595036377104794, 0.005452291852668146],
    'I_KL':
    1.71128377695144,
    'I_bin':
    729.1274238227146
}, {
    'APT': [0.8245512223846693, 0.16930646049805834, 0.0060805805140285735],
    'I_KL':
    1.7349956512818632,
    'I_bin':
    668.6948237535726
}]

yelp_mf_bias = [{
    'APT': [0.7860607372923399, 0.2050641476749739, 0.008850755156174214],
    'I_KL':
    1.8095406713808755,
    'I_bin':
    240.53385416666666
}, {
    'APT': [0.8027743192768705, 0.19478427975963977, 0.0024215521752468136],
    'I_KL':
    1.3772960659879596,
    'I_bin':
    497.47755834829445
}, {
    'APT': [0.8286670636425465, 0.1692587379779463, 0.0020588606795504086],
    'I_KL':
    1.4742499266589335,
    'I_bin':
    642.9118329466356
}, {
    'APT': [0.8322786408994515, 0.1652835670077028, 0.002411627781085958],
    'I_KL':
    1.531823458405633,
    'I_bin':
    545.1942941465813
}, {
    'APT': [0.832662083401116, 0.16479817391147392, 0.002522600552157252],
    'I_KL':
    1.5716631677668482,
    'I_bin':
    461.05657237936776
}]


def plot_metrics(data, key='precision', topk=1, title='Gowa MF'):
    d = [bag[key][topk] for bag in data]
    x = dims
    plt.plot(x, d, marker="^")
    plt.xlabel("Dims")
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.xticks(x)
    plt.show()

def plot_bias(data, key='APT', title = "Gowa MF"):
    if key == "APT":
        d_SH = [bag[key][0] for bag in data]
        d_MT = [bag[key][1] for bag in data]
        d_LT = [bag[key][2] for bag in data]
        x = dims
        plt.plot(x, d_SH, label="Short Head", marker="^")
        plt.plot(x, d_MT, label="Medium Tail", marker="^")
        plt.plot(x, d_LT, label="Long Tail", marker="^")
        plt.legend()
    else:
        d = [bag[key] for bag in data]
        x = dims
        plt.plot(x, d, marker="^")
    plt.xticks(x)
    plt.xlabel("Dims")
    plt.ylabel(f"{key}")
    plt.title(title)
    plt.show()


if __name__ == "__main__":
    data = amaz_lgn
    bias = None
    title = 'Amaz LGN'

    plot_metrics(data, title=title)
    plot_bias(bias, title=title)
    plot_bias(bias, key='I_KL',title=title)
    plot_bias(bias, key='I_bin', title=title)
